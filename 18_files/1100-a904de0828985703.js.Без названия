!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="ca469ce3-673c-4566-b2f3-dbfbf1d84378",e._sentryDebugIdIdentifier="sentry-dbid-ca469ce3-673c-4566-b2f3-dbfbf1d84378")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1100],{67088:function(e,t,n){n.d(t,{Mn:function(){return o},i:function(){return u},lR:function(){return c},tW:function(){return a},x5:function(){return i},y6:function(){return l},zY:function(){return s}});var r=n(17090);let i=[r.TEAM_PLAN_TYPE.CUSTOM,r.plan.PRO,r.plan.STANDARD,r.plan.BASIC,r.plan.FREEPLUS,r.plan.FREE],o=[{name:"Character Reference",controlnetType:r.CONTROLNET_TYPE.FaceTransfer},{name:"Content Reference",controlnetType:r.CONTROLNET_TYPE.ContentTransfer}],l=[{name:"Character Reference",controlnetType:r.CONTROLNET_TYPE.FaceTransfer},{name:"Style Reference",controlnetType:r.CONTROLNET_TYPE.StyleTransfer}],a=[{name:"Character Reference",controlnetType:r.CONTROLNET_TYPE.FaceTransfer,options:[{label:"Low",value:.66,description:"Low strength will have the greatest flexibility at the cost of resemblance"},{label:"Mid",value:1.32,description:"Medium strength will display reasonable flexibility and more resemblance"},{label:"High",value:2,description:"High strength may be less flexible but have the best resemblance"}]},{name:"Style Reference",controlnetType:r.CONTROLNET_TYPE.StyleTransfer,options:[{label:"Low",value:.4},{label:"Mid",value:.8},{label:"High",value:1.2},{label:"Ultra",value:1.6},{label:"Max",value:2}]},{name:"Content Reference",controlnetType:r.CONTROLNET_TYPE.ContentTransfer,options:[{label:"Low",value:.66},{label:"Mid",value:1.32},{label:"High",value:2}]}],u=[{name:"Style Reference",controlnetType:r.CONTROLNET_TYPE.StyleTransfer},{name:"Character Reference",controlnetType:r.CONTROLNET_TYPE.FaceTransfer},{name:"Content Reference",controlnetType:r.CONTROLNET_TYPE.ContentTransfer}],s=[{name:"Style Reference",controlnetType:r.CONTROLNET_TYPE.StyleTransfer}],c=.5},79215:function(e,t,n){n.d(t,{vp:function(){return N},st:function(){return O},AW:function(){return A},fS:function(){return f},z9:function(){return L},Xr:function(){return P},O_:function(){return _},Z5:function(){return m},_m:function(){return I},nD:function(){return d},K9:function(){return C},gK:function(){return E}});var r=n(35496),i=n(64688),o=n(17090),l=n(41291),a=n(67088),u=function(e,t){if(t<=0||t>=1)throw Error("Accuracy must be > 0 and < 1.");let n=Math.sign(e);-1===n&&(e=Math.abs(e));let r=0===n?t:e*t,i=Math.floor(e);if((e-=i)<r)return[n*i,1];if(1-r<e)return[n*(i+1),1];let o=0,l=1,a=1,u=1;for(;;){let t=o+a,s=l+u;if(s*(e+r)<t)a=t,u=s;else{if(!(t<(e-r)*s))return[i*s+t*n,s];o=t,l=s}}},s=n(39554),c=n(93380);let d=e=>a.zY.some(t=>t.controlnetType===e),T=(e,t)=>e?t.filter(t=>{var n;return t.type===l.N.ControlNet&&t.isEnabled&&(null===(n=t.match)||void 0===n?void 0:n.controlnetType)===e}):[],E=(e,t)=>{if(!e)return!1;let n=d(e),r=T(e,t);return n&&r.length>1},_=e=>{var t,n,r,o,a,u,s,c;let{definition:d,imageInputType:T}=e;return T===l.N.Img2Img?{min:i.INIT_IMAGE_STRENGTH_MIN_VALUE,max:i.INIT_IMAGE_STRENGTH_MAX_VALUE,step:i.INIT_IMAGE_STRENGTH_STEP_VALUE,default:i.INIT_IMAGE_STRENGTH_DEFAULT_VALUE}:T===l.N.ImagePrompt?{min:i.IMAGE_PROMPT_STRENGTH_MIN_VALUE,max:i.IMAGE_PROMPT_STRENGTH_MAX_VALUE,step:i.IMAGE_PROMPT_STRENGTH_STEP_VALUE,default:i.IMAGE_PROMPT_STRENGTH_DEFAULT_VALUE}:(null==d?void 0:d.name)==="Content Reference"?{min:null!==(t=null==d?void 0:d.weightMin)&&void 0!==t?t:i.CONTROLNET_STRENGTH_MIN_VALUE,max:null!==(n=null==d?void 0:d.weightMax)&&void 0!==n?n:i.CONTROLNET_STRENGTH_MAX_VALUE,step:i.CONTROLNET_STRENGTH_STEP_VALUE,default:2}:(null==d?void 0:d.name)==="Style Reference"?{min:null!==(r=null==d?void 0:d.weightMin)&&void 0!==r?r:i.CONTROLNET_STRENGTH_MIN_VALUE,max:null!==(o=null==d?void 0:d.weightMax)&&void 0!==o?o:i.CONTROLNET_STRENGTH_MAX_VALUE,step:i.CONTROLNET_STRENGTH_STEP_VALUE,default:.8}:(null==d?void 0:d.name)==="Character Reference"?{min:null!==(a=null==d?void 0:d.weightMin)&&void 0!==a?a:i.CONTROLNET_STRENGTH_MIN_VALUE,max:null!==(u=null==d?void 0:d.weightMax)&&void 0!==u?u:i.CONTROLNET_STRENGTH_MAX_VALUE,step:i.CONTROLNET_STRENGTH_STEP_VALUE,default:1.32}:{min:null!==(s=null==d?void 0:d.weightMin)&&void 0!==s?s:i.CONTROLNET_STRENGTH_MIN_VALUE,max:null!==(c=null==d?void 0:d.weightMax)&&void 0!==c?c:i.CONTROLNET_STRENGTH_MAX_VALUE,step:i.CONTROLNET_STRENGTH_STEP_VALUE,default:i.CONTROLNET_STRENGTH_DEFAULT_VALUE}},f=(e,t)=>_({imageInputType:e,definition:t}).default,A=e=>{let{weight:t,...n}=e,r=_(n);return Math.max(r.min,Math.min(t,r.max))},N=e=>{let{width:t,height:n}=e;if(!n)return{numerator:0,denominator:0,error:0};let r=t/n,[i,o]=u(r,.05),l=Math.abs(r-i/o);return{numerator:i,denominator:o,error:l}},I=e=>{var t,n,u,d;let{imageInputs:T,imageInput:E,imageInputIdx:_,imageInputLimit:f,usingLeonardoMagic:A,usingAlchemy:N,inputBaseModel:I,currentSdVersion:p,leonardoMagicVersion:v,usingPhotoReal:m,photoRealVersion:O,usingTransparency:C}=e,L=(0,c.dU)(p),P=N&&A&&!L&&v===r.PROMPT_MAGIC_VERSIONS.v3;if(!E)return!1;let h=E.type===l.N.ControlNet&&(null===(t=E.match)||void 0===t?void 0:t.controlnetType)===o.CONTROLNET_TYPE.StyleTransfer,g=E.type===l.N.ControlNet&&(null===(n=E.match)||void 0===n?void 0:n.controlnetType)===o.CONTROLNET_TYPE.FaceTransfer,R=E.type===l.N.ControlNet&&(null===(u=E.match)||void 0===u?void 0:u.controlnetType)===o.CONTROLNET_TYPE.ContentTransfer;if((0,c.Wm)(p))return"You cannot use image to image inputs with Stable Diffusion V3";if(void 0!==f&&_>=f)return 1===f?"You can only have ".concat(f," image guidance input enabled. Please remove this image input."):"You can only have ".concat(f," image guidance inputs enabled. Please remove this image input.");if(A&&v===r.PROMPT_MAGIC_VERSIONS.v2)switch(E.type){case l.N.ControlNet:return"You cannot use controlnet inputs with Prompt Magic v2.";case l.N.Img2Img:return"You cannot use image to image inputs with Prompt Magic v2.";case l.N.ImagePrompt:return!0}else if(E.type===l.N.ImagePrompt)return"Image Prompts require Prompt Magic V2";if(E.type===l.N.Img2Img)return T.filter(e=>e.type===l.N.Img2Img&&e.isEnabled).length>1?"You can only have one Image to image input enabled.":!L&&!m&&!P||!T.find(e=>e.type===l.N.ControlNet&&e.match.controlnetType!==o.CONTROLNET_TYPE.StyleTransfer&&e.match.controlnetType!==o.CONTROLNET_TYPE.FaceTransfer)||"Image to Image cannot be combined with other image guidance for XL models, PhotoReal, and PMv3.";if(E.type===l.N.ControlNet){if(a.Mn.some(e=>e.controlnetType===E.match.controlnetType)&&T.filter(e=>e.type===l.N.ControlNet&&e.match.controlnetType===E.match.controlnetType&&e.isEnabled).length>1){let e=null===(d=a.Mn.find(e=>e.controlnetType===E.match.controlnetType))||void 0===d?void 0:d.name;return"You cannot have more than one ".concat(e," input")}if((E.match.controlnetType===o.CONTROLNET_TYPE.Depth||E.match.controlnetType===o.CONTROLNET_TYPE.Canny)&&T.some(e=>e.type===l.N.ControlNet&&e.match.controlnetType===o.CONTROLNET_TYPE.ContentTransfer&&e.isEnabled))return"This ControlNet isn't compatible with Content Reference."}if(!I)return"This ControlNet isn't compatible with the selected model.";if(P)return h?"Style Reference is not compatible with Prompt Magic V3":R?"Content Reference is not compatible with Prompt Magic V3":g?"Character Reference is not compatible with Prompt Magic V3":!!(!I||(0,c.dU)(I)||!h)||"Only SDXL ControlNets can be used with Prompt Magic V3";if(m){let e=!I||(0,c.dU)(I);if(O===i.PhotoRealVersion.V1){if(h)return"Style Reference is not compatible with PhotoReal V1";if(g)return"Character Reference is not compatible with PhotoReal V1"}return!!e||"Only SDXL ControlNets can be used with PhotoReal"}return C===s.T7i.ForegroundOnly&&h?"Style Reference is not compatible with Transparency":L?!!(!I||(0,c.dU)(I))||"This ControlNet isn't compatible with the selected model.":!!(!I||I===p)||"This ControlNet isn't compatible with the selected model."},p=e=>{let{inputBaseModel:t,usingLeonardoMagic:n,leonardoMagicVersion:i,usingAlchemy:o,usingPhotoReal:l,currentSdVersion:a}=e;if(!t)return!1;let u=o&&n&&i===r.PROMPT_MAGIC_VERSIONS.v3;return l||u||(0,c.dU)(a)?(0,c.dU)(t):!t||t===a},v=e=>{let{controlnet:t,usingLeonardoMagic:n,leonardoMagicVersion:i}=e;return n&&i===r.PROMPT_MAGIC_VERSIONS.v2?[!0,"Prompt Magic v2 is currently incompatible with controlnets, disable it to use this option."]:[!1]},m=e=>{let{imageInputDefinitions:t,usingPhotoReal:n,usingAlchemy:r,usingLeonardoMagic:i,leonardoMagicVersion:o,currentSdVersion:l}=e;return(t||[]).filter(e=>e.preprocessors.find(e=>p({usingPhotoReal:n,usingAlchemy:r,usingLeonardoMagic:i,leonardoMagicVersion:o,currentSdVersion:l,inputBaseModel:e.preprocessorBaseModel}))).map(e=>e.preprocessors.filter(e=>p({usingPhotoReal:n,usingAlchemy:r,usingLeonardoMagic:i,leonardoMagicVersion:o,currentSdVersion:l,inputBaseModel:e.preprocessorBaseModel})).filter(e=>!(e.preprocessorName||"").includes("Zoe")||(0,c.dU)(e.preprocessorBaseModel)).map(t=>{let[n,r]=v({controlnet:e,usingLeonardoMagic:i,leonardoMagicVersion:o});return{...t,...e,isDisabled:n,disabledTooltip:r}})).flat().sort((e,t)=>{let n=["StyleTransfer","ContentTransfer","FaceTransfer"],r=n.includes(e.controlnetType),i=n.includes(t.controlnetType);return r&&i?n.indexOf(e.controlnetType)-n.indexOf(t.controlnetType):r?-1:i?1:e.name.localeCompare(t.name)})},O=(e,t)=>{let n=a.x5.indexOf(e);if(!t.availableToPlan)return!0;let r=a.x5.indexOf(t.availableToPlan);return -1!==n&&r>=n},C=e=>{let{preprocessor:t,controlNetMatch:n,usingPhotoReal:i,usingAlchemy:o,usingLeonardoMagic:l,leonardoMagicVersion:a,currentSdVersion:u,matchAnyProcessorModelVersion:s}=e,d=t.preprocessorName===n.preprocessorName,T=t.preprocessorBaseModel===u;if(s)return d;let E=o&&l&&a===r.PROMPT_MAGIC_VERSIONS.v3;return i||E||(0,c.dU)(u)?d&&(0,c.dU)(t.preprocessorBaseModel):d&&T},L=(e,t)=>{if(e&&t.imageInputDefinitions&&e.type===l.N.ControlNet)return t.imageInputDefinitions.find(t=>{var n;return t.controlnetType===(null==e?void 0:null===(n=e.match)||void 0===n?void 0:n.controlnetType)})},P=e=>{var t;let{currentSdVersion:n,leonardoMagicVersion:r,usingAlchemy:i,usingLeonardoMagic:o,usingPhotoReal:u,canChangeToImagePrompt:s,canChangeToImg2Img:c,imageInputDefinitions:d,currentPlan:f,isPremiumUser:A,existingImageInputs:N}=e,I=m({imageInputDefinitions:d,currentSdVersion:n,leonardoMagicVersion:r,usingAlchemy:i,usingLeonardoMagic:o,usingPhotoReal:u});if(!A&&c)return{type:l.N.Img2Img,weighting:_({imageInputType:l.N.Img2Img}).default};if(s)return{type:l.N.ImagePrompt,weighting:_({imageInputType:l.N.ImagePrompt}).default};let v=I.find(e=>!!p({usingPhotoReal:u,usingAlchemy:i,usingLeonardoMagic:o,leonardoMagicVersion:r,currentSdVersion:n,inputBaseModel:e.preprocessorBaseModel})&&O(f,e));if(!v){let e=s?l.N.ImagePrompt:l.N.Img2Img;return{type:e,weighting:_({imageInputType:e}).default}}let C=E(v.controlnetType,N),L=C?{influence:a.lR}:{},P=T(v.controlnetType,N),h=C&&P.length>1?P[0].weighting:_({imageInputType:l.N.ControlNet,definition:v}).default;return{type:l.N.ControlNet,match:{preprocessorName:null!==(t=v.preprocessorName)&&void 0!==t?t:void 0,controlnetType:v.controlnetType},weighting:h,...L}}},10943:function(e,t,n){n.d(t,{R:function(){return r},f:function(){return i}});let r={isStoryboard:{_eq:!1}},i={universalUpscaler:{_is_null:!0}}},81210:function(e,t,n){n.d(t,{lC:function(){return V},Be:function(){return h},GU:function(){return es},mQ:function(){return ec},zd:function(){return p},cY:function(){return eo},OP:function(){return X},hr:function(){return er},_3:function(){return U},M4:function(){return x},tg:function(){return J},aW:function(){return O},pX:function(){return N},vq:function(){return I},Fx:function(){return A},Cv:function(){return P},BW:function(){return C},Zh:function(){return L},oo:function(){return el},_B:function(){return ed},ro:function(){return y},M:function(){return b},U8:function(){return et},pf:function(){return w},RN:function(){return D},I:function(){return G},X6:function(){return $},E3:function(){return ea},vg:function(){return eu},_$:function(){return Z},yj:function(){return q},l2:function(){return g},Hv:function(){return z},XL:function(){return ee},De:function(){return Q},io:function(){return v},Uw:function(){return S},WE:function(){return function e(t){if(null!==t){if((null==t?void 0:t.constructor.name)==="Object")for(let n in t)t[n]=e(t[n]);return t}}},z3:function(){return F},As:function(){return H},rl:function(){return R},PV:function(){return W},wX:function(){return Y},a9:function(){return j}});var r=n(64688),i=n(17090),o=n(62737),l=n.n(o);class a{constructor(){let e,t;this.promise=new Promise((n,r)=>{e=n,t=r}),this.resolve=t=>{e(t)},this.reject=e=>{t(e)}}}var u=n(34587),s=n(93380),c=n(91825),d=n(63432),T=n(79215),E=n(39554),_=n(9109).Buffer;let f=e=>{let t=e%10,n=e%100;return 1===t&&11!==n?e+"st":2===t&&12!==n?e+"nd":3===t&&13!==n?e+"rd":e+"th"},A=e=>{let t=f(l()(e).date()),n=l()(e).format("MMMM");return"".concat(t," ").concat(n)},N=e=>l()(e).format("DD/MM/YY [at] h:mm A"),I=e=>l()(e).format("DD MMM YYYY hh:mma"),p=e=>{var t;return(null===(t=e[0])||void 0===t?void 0:t.toUpperCase())+e.substring(1)},v=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;return e?e.length<=t-3?e:e.substring(0,t-3)+"...":""},m=e=>"object"!=typeof e&&null===e&&"function"!=typeof e&&!Array.isArray(e),O=e=>Object.entries(e).reduce((e,t)=>{let[n,r]=t;return m(r)?e[n]=r:e[n]=JSON.stringify(r),e},{}),C=e=>{switch(!0){case 1===e:return"one second";case e<60:return"".concat(e," seconds");case e<3600:let t=Math.floor(e/60);return 1===t?"1 minute":"".concat(t," minutes");case e<86400:let n=Math.floor(e/3600);return 1===n?"an hour":"".concat(n," hours");default:let r=Math.floor(e/86400);return 1===r?"a day":"".concat(r," days")}},L=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expired";return e>1728e5?Math.floor(e/864e5)+" days":e>72e5?Math.floor(e/36e5)+" hrs":e>12e4?Math.floor(e/6e4)+" mins":e>2e3?Math.floor(e/1e3)+" secs":e>1e3?"1 sec":e>0?"now":t},P=e=>{let t=Date.now();return L(e.getTime()-t)},h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Enter";e.key===t&&e.target.blur()},g=e=>{if(!e)return"No title.";let t=e.search(/,|\./gm);return p(v(e.substring(0,-1===t?void 0:t),50))},R=e=>{let{data:t,callback:n,method:r="POST",url:i}=e,{promise:o,resolve:l,reject:u}=new a,s=new XMLHttpRequest;return s.addEventListener("progress",e=>{let t=Math.round(e.loaded/e.total*100),r=e.loaded>=e.total;null==n||n(t,r)}),s.addEventListener("load",()=>{l(s)}),s.addEventListener("error",e=>{console.error("Error while processing XHR request:",e),u(e)}),s.open(r,i),s.send(t),o},U=e=>{var t,n;let r=null===(t=(0,d.YJ)(e.generated_image_variation_generics))||void 0===t?void 0:t.url;return{id:e.id,title:g(e.generation.prompt),prompts:v(e.generation.prompt,150),imageUrl:e.url,motionGifUrl:null==e?void 0:e.motionGIFURL,motionMp4Url:null==e?void 0:e.motionMP4URL,generationId:e.generationId,isLiked:!!(null===(n=e.user_liked_generated_images)||void 0===n?void 0:n.length),likes:(null==e?void 0:e.likeCount)||0,user:e.user,createdAt:e.createdAt,generation:e.generation,generated_image_variation_generics:e.generated_image_variation_generics,conditionalImageUrl:r||e.url,showLatestUpscaledImg:!!r}},S=(e,t)=>M(e,t),M=(e,t)=>{var n,r,i,o,l,a,u;let s=null===(n=e.generations[0])||void 0===n?void 0:n.prompt;return{id:e.id,name:v(e.name),description:v(e.description,150),imageUrl:(null==e?void 0:null===(i=e.generated_image)||void 0===i?void 0:i.url)?null==e?void 0:e.generated_image.url:(null==e?void 0:null===(l=e.generations[0])||void 0===l?void 0:null===(o=l.generated_images[0])||void 0===o?void 0:o.url)?null==e?void 0:null===(u=e.generations[0])||void 0===u?void 0:null===(a=u.generated_images[0])||void 0===a?void 0:a.url:"",imagePrompt:s,user:e.user,createdAt:e.createdAt,isLiked:!!(null===(r=e.user_favourite_custom_models)||void 0===r?void 0:r.length),onClick:()=>t(e.id),instancePrompt:e.instancePrompt,sdVersion:e.sdVersion,coreModel:e.coreModel,modelHeight:e.modelHeight,modelWidth:e.modelWidth,trainingStrength:e.trainingStrength,type:e.type,isNsfw:null==e?void 0:e.nsfw,isPublic:null==e?void 0:e.public,imageCount:e.imageCount}},y=e=>{switch(e){case i.sd_versions.v1_5:return"v".concat(u.CW[i.sd_versions.v1_5]);case i.sd_versions.v2:return"v".concat(u.CW[i.sd_versions.v2]);default:return""}};function V(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=n>=0?Math.min(n,e.length):Math.max(e.length+n+1,0);return[...e.slice(0,r),t,...e.slice(r)]}function H(e,t){let n=[...e],r=n.findIndex("function"==typeof t?t:e=>e===t);return r>-1&&n.splice(r,1),n}function Y(e,t,n){let r=[...e].slice(0,n-1);return r.unshift(t),r}let b=e=>{switch(e){case i.sd_generation_schedulers.KLMS:return"KLMS";case i.sd_generation_schedulers.EULER_ANCESTRAL_DISCRETE:return"Euler Ancestral ";case i.sd_generation_schedulers.EULER_DISCRETE:return"Euler Discrete";case i.sd_generation_schedulers.DDIM:return"DDIM";case i.sd_generation_schedulers.DPM_SOLVER:return"DPM Solver";case i.sd_generation_schedulers.DPM_SDE_SOLVER:return"DPM SDE Solver";case i.sd_generation_schedulers.PNDM:return"PNDM";case i.sd_generation_schedulers.UNIPC:return"UniPC";case i.sd_generation_schedulers.LEONARDO:return"Leonardo";case i.sd_generation_schedulers.DPM_SDE_KARRAS:return"DPM 2M SDE Karras ++";default:throw Error("Error in helpers/getFormattedScheduler: Unknown scheduler: ".concat(e))}},w=e=>{let{width:t,height:n,promptMagicVersion:o,usingTransparency:l,usingAlchemy:a,usingAlchemyV2:s,usingHighRes:c,usingMotion:d,usingPhotoRealV1:T,usingPhotoRealV2:_,usingPromptMagic:f,usingSvd:A}=e,N=t*n;if(l===E.T7i.ForegroundOnly&&(a||s||T||_))return N>1048576?1:N>589824?2:4;if(d||A)return r.MOTION_MAX_OUTPUTS_PER_GENERATION;if(s||_)return N>1055360?1:N>589824?4:8;if(c){if(t>u.vH[3]||n>u.vH[3])return 1;if(t>u.vH[2]||n>u.vH[2])return 2}let I=f&&o===i.PROMPT_MAGIC_VERSIONS.v3||T,p=0;for(;p<u.vH.length;p++){let e=Math.max(t,n);if(e<=(u.vH[p+1]||1/0)&&e>u.vH[p])break}return I?u.uV[p]:u.lc[p]},D=()=>{let e=new Date,t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds();return new Date(e.getTime()+(864e5-(36e5*t+6e4*n+1e3*r))).getTime()},G=()=>{let e=new Date;return e.setUTCMonth(e.getUTCMonth()+1),e.setUTCDate(1),e.setUTCHours(0),e.setUTCMinutes(0),e.setUTCSeconds(0),e.setUTCMilliseconds(0),e.getTime()},F=e=>e===c.jX.value?void 0:e,x=e=>new Promise((t,n)=>{let r=new FileReader;r.onload=()=>{t(r.result)},r.onerror=()=>{n(r.error)},r.readAsDataURL(e)}),B=e=>new Promise((t,n)=>{let r=new FileReader;r.onload=()=>{t(r.result)},r.onerror=()=>{n(r.error)},r.readAsText(e)}),K=e=>{let{inputString:t,regexPattern:n,regexModifier:r}=e,i=new RegExp(n,r);return((t||"").match(i)||[]).length},k=async e=>{let t={};for(let n of[["vertex","\nv ","g"],["uv","\nvt ","g"],["normal","\nvn ","g"],["face","\nf ","g"],["group","\ng ","g"],["usemtl","\nusemtl ","g"]])t[n[0]]=K({inputString:e,regexPattern:n[1],regexModifier:n[2]});return t},j=async e=>{let t=await B(e),n=await k(t),r=t.match(/f .*/gm);if(!(r||[]).length)return{isValid:!1,message:"no faces specified",counts:n};for(let e of(r||[]).map(e=>e.replace(/f /,"")).flatMap(e=>e.split(" ")).map(e=>e.split("/").map(e=>parseInt(e)))){if(e.length>3)return{isValid:!1,message:"more than 3 integers detected for a face vertex",counts:n};if(!e.length)return{isValid:!1,message:"face vertex missing",counts:n};if(e[0]>n.vertex)return{isValid:!1,message:"out of bounds vertex specified ".concat(e[0]),counts:n};if(void 0!==e[1]&&e[1]>n.uv)return{isValid:!1,message:"out of bounds uv specified ".concat(e[1]),counts:n};if(void 0!==e[2]&&e[2]>n.normal)return{isValid:!1,message:"out of bounds normal specified ".concat(e[2]),counts:n}}return{isValid:!0,counts:n}},X=e=>new Blob([e.split(",")[0].includes("base64")?_.from(e.split(",")[1],"base64"):decodeURIComponent(e.split(",")[1])],{type:e.split(",")[0].split(":")[1].split(";")[0]}),Z=e=>{let{data:t,selectedTextureGenId:n}=e;if(!t)return null;let{model_asset_texture_generations:r,...i}=t,o=r.find(e=>e.id===n);return o?{...o,...i}:null},q=e=>{let t={};for(let n of(null==e?void 0:e.model_asset_texture_images)||[]){let e=n.type;t[e]?console.error("duplicate texture type detected in generation",n):t[e]=n.url}return t},z=e=>/^\d+$/.test(e),W=e=>{let{text:t,wordLimit:n}=e;if(!Number.isInteger(n)||n<1)throw Error("invalid wordLimit argument");if("string"!=typeof t)throw Error("invalid text argument");let r=t.trim().replace(/[ ]{2,}/g," ").split(" "),i=r.slice(0,n).join(" ");return r.length>n?"".concat(i," ..."):i},J=e=>e.replace(/\r?\n|\r/g,""),Q=e=>e===i.SUBSCRIPTION_SOURCE.APPLE,$=e=>({...u.sP,onClick:e}),ee=e=>e===i.plan.FREE,et=e=>"loras:".concat(JSON.stringify({akUUID:e})),en=e=>"controlnet_preprocessor_matrix:".concat(e),er=(e,t,n)=>n.filter(e=>e.isEnabled).filter(e=>0!==e.weight).filter(n=>{let r=et(n.id),i=e.readFragment({id:r,fragment:E.L1x});return null!=i&&!!i.baseModel&&(0,s.ju)(t,i.baseModel)}),ei=async e=>{var t;let{apolloClient:n,sdVersion:r,usingLeonardoMagic:i,usingAlchemy:o,leonardoMagicVersion:l,usingPhotoReal:a,match:u}=e,s=await n.query({query:E.Ks$}),c=e=>(0,T.K9)({preprocessor:e,controlNetMatch:u,currentSdVersion:r,usingAlchemy:o,usingLeonardoMagic:i,leonardoMagicVersion:l,usingPhotoReal:a}),d=s.data.controlnet_definition.find(e=>e.controlnetType===u.controlnetType&&!!e.preprocessors.find(c));if(!d)return null;let _=d.preprocessors.find(c);return null!==(t=null==_?void 0:_.id)&&void 0!==t?t:null},eo=async e=>{let{apolloClient:t,controlnets:n,imageInputs:r,imageInputLimit:i,usingLeonardoMagic:o,usingAlchemy:l,currentSdVersion:a,leonardoMagicVersion:u,usingPhotoReal:s,currentPlan:c,photoRealVersion:d,usingTransparency:_}=e,f=(await Promise.all(n.filter(e=>e.isEnabled).map(async e=>{let n=await ei({apolloClient:t,sdVersion:a,match:e.match,usingAlchemy:l,leonardoMagicVersion:u,usingLeonardoMagic:o,usingPhotoReal:s});if(n)return{...e,preprocessorId:n}}))).filter(Boolean),A=f.filter(e=>e.isEnabled).filter(e=>{let n=t.readFragment({id:en(e.preprocessorId),fragment:E.QXA});return null==n||!n.preprocessorBaseModel});return A.length>0&&await t.query({query:E.Ks$,variables:{where:{id:{_in:A.map(e=>e.preprocessorId)}}}}),f.filter(e=>e.isEnabled).filter((e,n)=>{var f;let A=en(e.preprocessorId),N=t.readFragment({id:A,fragment:E.QXA}),I=null==N?void 0:N.preprocessorBaseModel;if(!I||!N)return!1;let p=!0===(0,T._m)({imageInput:e,imageInputIdx:n,imageInputs:r,imageInputLimit:i,usingLeonardoMagic:o,usingAlchemy:l,inputBaseModel:I,currentSdVersion:a,leonardoMagicVersion:u,usingPhotoReal:s,photoRealVersion:d,usingTransparency:_}),v=(0,T.st)(c,{availableToPlan:null!==(f=N.availableToPlan)&&void 0!==f?f:void 0});return p&&v})},el=()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER),ea=()=>{var e,t,n;return(null===(n=window)||void 0===n?void 0:null===(t=n.Rewardful)||void 0===t?void 0:null===(e=t.coupon)||void 0===e?void 0:e.id)||void 0},eu=()=>{var e,t;return(null===(t=window)||void 0===t?void 0:null===(e=t.Rewardful)||void 0===e?void 0:e.referral)||void 0},es=e=>e?{team:{akUUID:{_eq:e}}}:{teamId:{_is_null:!0}},ec=e=>e?{teamId:{_eq:e}}:{teamId:{_is_null:!0}},ed=e=>{var t;let n=null===(t=e.teams)||void 0===t?void 0:t.find(t=>t.akUUID===e.selectedTeam);return(null==n?void 0:n.plan)||e.plan}},93380:function(e,t,n){n.d(t,{BF:function(){return f},Dg:function(){return O},GK:function(){return g},Nu:function(){return A},Nz:function(){return a},Oy:function(){return p},VG:function(){return u},VU:function(){return U},Wm:function(){return s},b5:function(){return C},bo:function(){return c},dU:function(){return _},gd:function(){return d},iY:function(){return I},ju:function(){return P},mA:function(){return T},on:function(){return h},p3:function(){return N},r9:function(){return m},xn:function(){return E},y0:function(){return R},z6:function(){return v}});var r=n(64688),i=n(17090),o=n(34587);let l=e=>e===r.LEONARDO_MOTION_MODEL_ID,a=e=>o.mz.includes(e),u=e=>e===i.sd_versions.v2,s=e=>e===i.sd_versions.v3,c=e=>o.Sc.includes(e),d=e=>l(e)?i.sd_generation_style.CREATIVE:c(e)?i.sd_generation_style.LEONARDO:i.sd_generation_style.NONE,T=e=>o.QL.includes(e),E=e=>T(e),_=e=>e===i.sd_versions.SDXL_0_8||e===i.sd_versions.SDXL_0_9||e===i.sd_versions.SDXL_1_0||e===i.sd_versions.SDXL_LIGHTNING,f=e=>e===i.sd_versions.PHOENIX,A=e=>e===i.sd_versions.SDXL_LIGHTNING,N=e=>_(e)||s(e)||f(e),I=(e,t,n)=>{if(!t)return!0;let r=n[t];return!r||(f(r.sdVersion)?f(e):!f(e))},p=(e,t)=>!s(e)||!!t.isSdV3Enabled,v=e=>e===r.MODEL_IDS.PHOTOREAL,m=e=>!!Object.values(r.PhotoRealV2Models).find(t=>t.id===e),O=e=>v(e)||m(e),C=(e,t)=>{var n;return(null===(n=Object.values(r.PhotoRealV2Models).find(t=>t.id===e))||void 0===n?void 0:n.name)||t||"Unknown Model"},L=e=>r.LORA_MODEL_COMPATIBILITY_MAP[e]?r.LORA_MODEL_COMPATIBILITY_MAP[e]:[],P=(e,t)=>L(e).includes(t),h=e=>!(s(e)||f(e)),g=e=>{let{modelFamily:t,elementFamily:n,usingPhotoReal:o,photoRealVersion:l}=e;return!(s(t)||f(t))&&(o&&l!==r.PhotoRealVersion.V2?P(n,i.sd_versions.v1_5):P(n,t))},R=e=>{let{modelFamily:t,usingPhotoReal:n,photoRealVersion:o}=e;return n&&o!==r.PhotoRealVersion.V2?L(i.sd_versions.v1_5):L(t)},U=e=>{let{usingPhotoReal:t,customRequest:n,photoRealVersion:i,modelId:o}=e;if(t&&i===r.PhotoRealVersion.V2||!t&&n)return o}},91825:function(e,t,n){var r,i,o,l,a,u;n.d(t,{TH:function(){return o},es:function(){return r},jX:function(){return i}}),(l=r||(r={})).Upload="upload",l.Generated="generated",(a=i||(i={})).value="ALL",a.label="All",(u=o||(o={})).INPAINT="INPAINT",u.NO_BG="NO_BG",u.OUTPAINT="OUTPAINT",u.UNZOOM="UNZOOM",u.UPSCALE_ALTERNATE="UPSCALE_ALTERNATE",u.UPSCALE_DEFAULT="UPSCALE_DEFAULT",u.UPSCALE_HD="UPSCALE_HD",u.UPSCALE_SMOOTH="UPSCALE_SMOOTH",u.ALCHEMY_REFINER="ALCHEMY_REFINER"},80311:function(e,t,n){n.d(t,{C1:function(){return r},OR:function(){return f},RU:function(){return a},Rp:function(){return i},Sh:function(){return T},dX:function(){return A},m_:function(){return l},oC:function(){return c},r$:function(){return o},sT:function(){return E},ug:function(){return u},xj:function(){return d},xs:function(){return s},zs:function(){return _}});let r="Alchemy Refiner under maintenance",i="Alchemy Upscaler - use this to refine and upscale your images. This can improve faces and hands as part of the process.",o="Alternative Upscale",l="Use this if you find the creative upscale is resulting in lost detail.",a="Creative Upscale",u="This can improve images during the upscaling process, but might make slight changes for better quality outputs.",s="HD Crisp Upscale",c="Alchemy Crisp Upscale",d="A great balanced upscaler which retains a good amount of detail and crispness to the image.",T="HD Smooth Upscale",E="Alchemy Smooth Upscale",_="An upscaler that works well with a focused subject, but can end up smoothing out fine detail.",f="Unzoom (BETA)",A="Remove background"},63432:function(e,t,n){n.d(t,{$m:function(){return ec},Al:function(){return ea},Bm:function(){return y},C3:function(){return w},Cn:function(){return eu},Eg:function(){return G},HQ:function(){return i},Je:function(){return E},KY:function(){return _},Kb:function(){return ed},NC:function(){return L},No:function(){return U},Oi:function(){return C},P:function(){return D},QV:function(){return F},R6:function(){return b},SW:function(){return et},UI:function(){return S},V6:function(){return V},VP:function(){return ei},Vy:function(){return v},WT:function(){return O},WZ:function(){return el},XI:function(){return H},YJ:function(){return j},Yl:function(){return en},aO:function(){return eE},cp:function(){return B},dv:function(){return Y},gM:function(){return ef},hH:function(){return ee},io:function(){return x},kL:function(){return p},oj:function(){return k},q7:function(){return M},rJ:function(){return I},rO:function(){return $},s8:function(){return P},t3:function(){return K},tB:function(){return R},tY:function(){return h},tr:function(){return A},u2:function(){return er},ud:function(){return m},ue:function(){return eo},y0:function(){return f},yP:function(){return eT},yW:function(){return es}});var r,i,o=n(64688),l=n(17090),a=n(34587),u=n(81210),s=n(91825),c=n(80311),d=n(10943),T=n(39554);let E=e=>{let{transformType:t}=e;switch(t){case"UNZOOM":return["UPSCALE","NOBG"];case"UPSCALE":return["NOBG"];case"NOBG":return[];default:return["UPSCALE","UNZOOM","NOBG"]}},_=e=>{let{availableVariations:t,variation:n}=e;return t.includes(n)},f=e=>{let{originalImg:t,hasDefaultUpscaledOptions:n,defaultUpscaledOptions:r,hasAlternateUpscaledOptions:i,alternateUpscaledOptions:o,hasHdUpscaledOptions:l,hdUpscaledOptions:u,hasUnzoomedOptions:s,unzoomedOptions:c,hasNoBgOptions:d,noBgOptions:T,hasSmoothUpscaledOptions:E,smoothUpscaledOptions:_,alchemyRefinerOptions:f,hasAlchemyRefinerOptions:A,hasUniversalUpscalerOptions:N,universalUpscalerOptions:I}=e,p=[];return t&&(p.push({value:a.IMAGE_SELECT_VALUES.ORIGINAL,label:"Original Image"}),A&&p.push(...f),N&&p.push(...I),E&&p.push(..._),l&&p.push(...u),i&&p.push(...o),n&&p.push(...r),s&&p.push(...c),d&&p.push(...T)),p},A=e=>null==e?void 0:e.map((e,t)=>({value:"".concat(a.IMAGE_SELECT_VALUES.NO_BG,"-").concat(t),label:"No Background ".concat(0===t?"":1+t++),variationId:e.id})),N=e=>{switch(e){case o.ALCHEMY_REFINER_STRENGTH.Low:return"Low";case o.ALCHEMY_REFINER_STRENGTH.Medium:return"Medium";case o.ALCHEMY_REFINER_STRENGTH.High:return"High"}},I=e=>{let[t]=e.upscale_details,{alchemyRefinerStrength:n,alchemyRefinerCreative:r}=t;if(!n&&!r)return"Alchemy Upscaler Image";let i=N(n);return"Alchemy Upscaler - ".concat(null!=i?i:(null!=n?n:0).toString()," ").concat(r?"Smooth":"Normal")},p=(e,t)=>{let[n]=e.upscale_details,[r]=t.upscale_details;return r.alchemyRefinerCreative===n.alchemyRefinerCreative?r.alchemyRefinerStrength-n.alchemyRefinerStrength:n.alchemyRefinerCreative?1:-1},v=e=>null==e?void 0:e.sort(p).map((e,t)=>({value:"".concat(a.IMAGE_SELECT_VALUES.ALCHEMY_REFINER,"-").concat(t),label:I(e),variationId:e.id})),m=e=>null==e?void 0:e.map((e,t)=>({value:"".concat(a.IMAGE_SELECT_VALUES.UNIVERSAL_UPSCALE,"-").concat(t),label:"Universal Upscaler ".concat(0===t?"":1+t++),variationId:e.id})),O=e=>null==e?void 0:e.reduce((e,t,n)=>t.status!==l.job_status.COMPLETE?e:[...e,{value:"".concat(a.IMAGE_SELECT_VALUES.DEFAULT_UPSCALED,"-").concat(n),label:"Creative Upscaled Image ".concat(0===n?"":1+n++),variationId:t.id}],[]),C=e=>null==e?void 0:e.map((e,t)=>({value:"".concat(a.IMAGE_SELECT_VALUES.ALTERNATE_UPSCALED,"-").concat(t),label:"Alternate Upscaled Image ".concat(0===t?"":1+t++),variationId:e.id})),L=(e,t)=>null==e?void 0:e.map((e,n)=>({value:"".concat(a.IMAGE_SELECT_VALUES.HD_UPSCALED,"-").concat(n),label:"".concat(t?c.oC:c.xs,"d Image ").concat(0===n?"":1+n++),variationId:e.id})),P=(e,t)=>null==e?void 0:e.map((e,n)=>({value:"".concat(a.IMAGE_SELECT_VALUES.SMOOTH_UPSCALED,"-").concat(n),label:"".concat(t?c.sT:c.Sh,"d Image ").concat(0===n?"":1+n++),variationId:e.id})),h=e=>null==e?void 0:e.map((e,t)=>({value:"".concat(a.IMAGE_SELECT_VALUES.UNZOOMED,"-").concat(t),label:"Unzoomed Image ".concat(0===t?"":1+t++),variationId:e.id})),g=e=>{var t,n,r,i,o,l,a;let{generated_image_variation_generics:u,imageVariationType:c}=e;switch(c){case s.TH.ALCHEMY_REFINER:return!!(null===(t=X(u))||void 0===t?void 0:t.length);case s.TH.UPSCALE_DEFAULT:return!!(null===(n=Z(u))||void 0===n?void 0:n.length);case s.TH.UPSCALE_ALTERNATE:return!!(null===(r=q(u))||void 0===r?void 0:r.length);case s.TH.UPSCALE_HD:return!!(null===(i=z(u))||void 0===i?void 0:i.length);case s.TH.UPSCALE_SMOOTH:return!!(null===(o=W(u))||void 0===o?void 0:o.length);case s.TH.UNZOOM:return!!(null===(l=J(u))||void 0===l?void 0:l.length);case s.TH.NO_BG:return!!(null===(a=Q(u))||void 0===a?void 0:a.length);default:throw Error("getHasHitVariationLimit: Unhandled image variation type")}},R=e=>{let t=g({generated_image_variation_generics:e,imageVariationType:s.TH.UPSCALE_DEFAULT}),n=g({generated_image_variation_generics:e,imageVariationType:s.TH.UPSCALE_ALTERNATE}),r=g({generated_image_variation_generics:e,imageVariationType:s.TH.UPSCALE_SMOOTH});return{hasHitLimitUpscaleDefault:t,hasHitLimitUpscaleAlternate:n,hasHitLimitUpscaleSmooth:r,hasHitLimitUpscaleHd:g({generated_image_variation_generics:e,imageVariationType:s.TH.UPSCALE_HD}),hasHitLimitUnzoom:g({generated_image_variation_generics:e,imageVariationType:s.TH.UNZOOM}),hasHitLimitNoBg:g({generated_image_variation_generics:e,imageVariationType:s.TH.NO_BG})}},U=e=>null==e?void 0:e.find(e=>e.status===l.job_status.COMPLETE&&e.transformType===l.VARIATION_TYPE.UPSCALE),S=e=>null==e?void 0:e.find(e=>{var t;return e.status===l.job_status.COMPLETE&&e.transformType===l.VARIATION_TYPE.UPSCALE&&(null===(t=e.upscale_details)||void 0===t?void 0:t.some(e=>e.oneClicktype===l.VARIATION_ONECLICK_TYPE.DEFAULT))}),M=e=>null==e?void 0:e.find(e=>{var t;return e.status===l.job_status.COMPLETE&&e.transformType===l.VARIATION_TYPE.UPSCALE&&(null===(t=e.upscale_details)||void 0===t?void 0:t.some(e=>e.oneClicktype===l.VARIATION_ONECLICK_TYPE.ALTERNATE))}),y=e=>null==e?void 0:e.find(e=>{var t;return e.status===l.job_status.COMPLETE&&e.transformType===l.VARIATION_TYPE.UPSCALE&&(null===(t=e.upscale_details)||void 0===t?void 0:t.some(e=>e.oneClicktype===l.VARIATION_ONECLICK_TYPE.HD))}),V=e=>null==e?void 0:e.find(e=>{var t;return e.status===l.job_status.COMPLETE&&e.transformType===l.VARIATION_TYPE.UPSCALE&&(null===(t=e.upscale_details)||void 0===t?void 0:t.some(e=>e.oneClicktype===l.VARIATION_ONECLICK_TYPE.SMOOTH))}),H=e=>null==e?void 0:e.find(e=>e.status===l.job_status.COMPLETE&&e.transformType===l.VARIATION_TYPE.UNZOOM),Y=e=>null==e?void 0:e.find(e=>e.status===l.job_status.COMPLETE&&e.transformType===l.VARIATION_TYPE.NOBG),b=e=>(null==e?void 0:e.filter(e=>e.status===l.job_status.COMPLETE&&e.transformType===l.VARIATION_TYPE.UPSCALE))||[],w=e=>(null==e?void 0:e.filter(e=>{var t;return e.status===l.job_status.COMPLETE&&e.transformType===l.VARIATION_TYPE.UPSCALE&&(null===(t=e.upscale_details)||void 0===t?void 0:t.some(e=>e.oneClicktype===l.VARIATION_ONECLICK_TYPE.ALCHEMY_REFINER))}))||[],D=e=>(null==e?void 0:e.filter(e=>{var t;return e.status===l.job_status.COMPLETE&&e.transformType===l.VARIATION_TYPE.UPSCALE&&(null===(t=e.upscale_details)||void 0===t?void 0:t.some(e=>e.oneClicktype===l.VARIATION_ONECLICK_TYPE.UNIVERSAL_UPSCALE))}))||[],G=e=>(null==e?void 0:e.filter(e=>{var t,n;return e.status===l.job_status.COMPLETE&&e.transformType===l.VARIATION_TYPE.UPSCALE&&(null===(t=e.upscale_details)||void 0===t?void 0:t.length)===0||(null===(n=e.upscale_details)||void 0===n?void 0:n.some(e=>e.oneClicktype===l.VARIATION_ONECLICK_TYPE.DEFAULT))}))||[],F=e=>(null==e?void 0:e.filter(e=>{var t;return e.status===l.job_status.COMPLETE&&e.transformType===l.VARIATION_TYPE.UPSCALE&&(null===(t=e.upscale_details)||void 0===t?void 0:t.some(e=>e.oneClicktype===l.VARIATION_ONECLICK_TYPE.ALTERNATE))}))||[],x=e=>(null==e?void 0:e.filter(e=>{var t;return e.status===l.job_status.COMPLETE&&e.transformType===l.VARIATION_TYPE.UPSCALE&&(null===(t=e.upscale_details)||void 0===t?void 0:t.some(e=>e.oneClicktype===l.VARIATION_ONECLICK_TYPE.HD))}))||[],B=e=>(null==e?void 0:e.filter(e=>{var t;return e.status===l.job_status.COMPLETE&&e.transformType===l.VARIATION_TYPE.UPSCALE&&(null===(t=e.upscale_details)||void 0===t?void 0:t.some(e=>e.oneClicktype===l.VARIATION_ONECLICK_TYPE.SMOOTH))}))||[],K=e=>(null==e?void 0:e.filter(e=>e.status===l.job_status.COMPLETE&&e.transformType===l.VARIATION_TYPE.UNZOOM))||[],k=e=>(null==e?void 0:e.filter(e=>e.status===l.job_status.COMPLETE&&e.transformType===l.VARIATION_TYPE.NOBG))||[],j=e=>{let t=w(e).sort(p);if(t.length)return t[0];let n=D(e);return n.length?n[0]:U(e)},X=e=>(null==e?void 0:e.filter(e=>{var t,n;return e.transformType===l.VARIATION_TYPE.UPSCALE&&(null===(t=e.upscale_details)||void 0===t?void 0:t.length)===0||(null===(n=e.upscale_details)||void 0===n?void 0:n.some(e=>e.oneClicktype===l.VARIATION_ONECLICK_TYPE.ALCHEMY_REFINER))}))||[],Z=e=>(null==e?void 0:e.filter(e=>{var t,n;return e.transformType===l.VARIATION_TYPE.UPSCALE&&(null===(t=e.upscale_details)||void 0===t?void 0:t.length)===0||(null===(n=e.upscale_details)||void 0===n?void 0:n.some(e=>e.oneClicktype===l.VARIATION_ONECLICK_TYPE.DEFAULT))}))||[],q=e=>(null==e?void 0:e.filter(e=>{var t;return e.transformType===l.VARIATION_TYPE.UPSCALE&&(null===(t=e.upscale_details)||void 0===t?void 0:t.some(e=>e.oneClicktype===l.VARIATION_ONECLICK_TYPE.ALTERNATE))}))||[],z=e=>(null==e?void 0:e.filter(e=>{var t;return e.transformType===l.VARIATION_TYPE.UPSCALE&&(null===(t=e.upscale_details)||void 0===t?void 0:t.some(e=>e.oneClicktype===l.VARIATION_ONECLICK_TYPE.HD))}))||[],W=e=>(null==e?void 0:e.filter(e=>{var t;return e.transformType===l.VARIATION_TYPE.UPSCALE&&(null===(t=e.upscale_details)||void 0===t?void 0:t.some(e=>e.oneClicktype===l.VARIATION_ONECLICK_TYPE.SMOOTH))}))||[],J=e=>(null==e?void 0:e.filter(e=>e.transformType===l.VARIATION_TYPE.UNZOOM))||[],Q=e=>(null==e?void 0:e.filter(e=>e.transformType===l.VARIATION_TYPE.NOBG))||[],$=e=>{let{collection:t,upscaleType:n}=e;return null==t?void 0:t.generated_image_variation_generic.find(e=>e.transformType===l.VARIATION_TYPE.UPSCALE&&e.upscale_details.some(t=>t.oneClicktype===n||0===e.upscale_details.length))},ee=(e,t)=>{var n,r,i,o,l,a,u;if(!t)return;let s=null==e?void 0:null===(r=e.upscale_details)||void 0===r?void 0:null===(n=r[0])||void 0===n?void 0:n.upscaleMultiplier,c=null==e?void 0:null===(o=e.upscale_details)||void 0===o?void 0:null===(i=o[0])||void 0===i?void 0:i.width,d=null==e?void 0:null===(a=e.upscale_details)||void 0===a?void 0:null===(l=a[0])||void 0===l?void 0:l.height;if(!t)return;let T=null===(u=t.find(e=>"Resolution"===e.spec))||void 0===u?void 0:u.value,E=c,_=d;if(!c&&!d){if("string"!=typeof T||!s)return;let[e,t]=T.replace("px","").split(" x ");E=Number(e)*s,_=Number(t)*s}return"".concat(E," x ").concat(_,"px")},et=e=>{let{transformType:t,oneClickType:n}=e;switch(t){case l.VARIATION_TYPE.NOBG:return s.TH.NO_BG;case l.VARIATION_TYPE.UNZOOM:return s.TH.UNZOOM;case l.VARIATION_TYPE.INPAINT:return s.TH.INPAINT;case l.VARIATION_TYPE.OUTPAINT:return s.TH.OUTPAINT;case l.VARIATION_TYPE.UPSCALE:switch(n){case l.VARIATION_ONECLICK_TYPE.ALCHEMY_REFINER:return s.TH.ALCHEMY_REFINER;case l.VARIATION_ONECLICK_TYPE.ALTERNATE:return s.TH.UPSCALE_ALTERNATE;case l.VARIATION_ONECLICK_TYPE.HD:return s.TH.UPSCALE_HD;case l.VARIATION_ONECLICK_TYPE.SMOOTH:return s.TH.UPSCALE_SMOOTH;case l.VARIATION_ONECLICK_TYPE.DEFAULT:}default:return s.TH.UPSCALE_DEFAULT}},en=e=>(()=>{switch(e){case s.TH.UNZOOM:return{variation:l.VARIATION_TYPE.UNZOOM};case s.TH.NO_BG:return{variation:l.VARIATION_TYPE.NOBG};case s.TH.UPSCALE_DEFAULT:return{variation:l.VARIATION_TYPE.UPSCALE};case s.TH.UPSCALE_ALTERNATE:return{variation:l.VARIATION_TYPE.UPSCALE,isAlternate:!0};case s.TH.UPSCALE_HD:return{variation:l.VARIATION_TYPE.UPSCALE,isHd:!0};case s.TH.UPSCALE_SMOOTH:return{variation:l.VARIATION_TYPE.UPSCALE,isSmooth:!0};default:throw Error("Unhandled variation type: ".concat(e))}})(),er=e=>{let t,n;let r={},i={id:e.imageId,isVariation:e.isVariation,...e.teamId&&{teamId:e.teamId}};switch(e.variation){case l.VARIATION_TYPE.UNZOOM:n=T.YrX,t="sdUnzoomJob";break;case l.VARIATION_TYPE.NOBG:n=T.QMH,t="sdNobgJob";break;case l.VARIATION_TYPE.UPSCALE:t="sdUpscaleJob",n=T.sVu,r=e.isAlternate?{alternativeUpscale:!0,hdUpscale:!1,smoothUpscale:!1}:e.isHd?{alternativeUpscale:!1,hdUpscale:!0,smoothUpscale:!1}:e.isSmooth?{alternativeUpscale:!1,hdUpscale:!1,smoothUpscale:!0}:{alternativeUpscale:!1,hdUpscale:!1,smoothUpscale:!1};break;default:throw Error("Unsupported variation type ".concat(e.variation))}return{arg1:{...i,...r},mutation:n,mutationResponseKey:t}},ei=e=>{switch(e){case s.TH.UPSCALE_DEFAULT:return l.VARIATION_ONECLICK_TYPE.DEFAULT;case s.TH.UPSCALE_ALTERNATE:return l.VARIATION_ONECLICK_TYPE.ALTERNATE;case s.TH.UPSCALE_HD:return l.VARIATION_ONECLICK_TYPE.HD;case s.TH.UPSCALE_SMOOTH:return l.VARIATION_ONECLICK_TYPE.SMOOTH;default:return null}},eo=e=>{switch(e){case s.TH.UPSCALE_DEFAULT:case s.TH.UPSCALE_ALTERNATE:case s.TH.UPSCALE_HD:case s.TH.UPSCALE_SMOOTH:return l.VARIATION_TYPE.UPSCALE;case s.TH.INPAINT:return l.VARIATION_TYPE.INPAINT;case s.TH.OUTPAINT:return l.VARIATION_TYPE.OUTPAINT;case s.TH.NO_BG:return l.VARIATION_TYPE.NOBG;case s.TH.UNZOOM:return l.VARIATION_TYPE.UNZOOM;default:throw Error("Unhandled image variation type: ".concat(e))}},el=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return{where:{userId:{_eq:e},...(0,u.GU)(t),canvasRequest:{_eq:!1},...d.f,...d.R},userId:e,teamAkUUID:t,limit:a.ZD,offset:n}},ea=e=>e?c.sT:c.Sh,eu=e=>e?c.oC:c.xs,es=e=>e?"Alchemy Smooth Upscale - For images with smooth textures, which includes illustrative, anime, and cartoon-like images - ":"".concat(c.Sh,"r - ").concat(c.zs," - "),ec=e=>e?"Alchemy Crisp Upscale - For images with lots of texture detail, including photos, digital art, and some 3D renders - ":"".concat(c.xs,"r - ").concat(c.xj," - "),ed=(e,t)=>{let n={};return Object.entries(e).forEach(e=>{let[r,i]=e;n[r]=i.filter(e=>{var n;return!(null===(n=t[r])||void 0===n?void 0:n.includes(e))})}),n};(r=i||(i={}))[r.NO_BG=0]="NO_BG",r[r.ALCHEMY_REFINER=1]="ALCHEMY_REFINER",r[r.UNIVERSAL_UPSCALER=2]="UNIVERSAL_UPSCALER",r[r.INSTANT_REFINE=3]="INSTANT_REFINE",r[r.DEFAULT_UPSCALE=4]="DEFAULT_UPSCALE",r[r.ALTERNATE_UPSCALE=5]="ALTERNATE_UPSCALE",r[r.HD_UPSCALE=6]="HD_UPSCALE",r[r.SMOOTH_UPSCALE=7]="SMOOTH_UPSCALE",r[r.UNZOOM=8]="UNZOOM";let eT={0:"No Background",1:e=>I(e),2:"Universal Upscaler",3:"Instant Refine Image",4:"Creative Upscaled Image",5:"Alternate Upscaled Image",6:(e,t)=>"".concat(t?c.oC:c.xs,"d Image"),7:(e,t)=>"".concat(t?c.sT:c.Sh,"d Image"),8:"Unzoomed Image"},eE=e=>{switch(e.transformType){case l.VARIATION_TYPE.UNZOOM:return 8;case l.VARIATION_TYPE.NOBG:return 0;case l.VARIATION_TYPE.UPSCALE:switch(e.upscale_details[0].oneClicktype){case l.VARIATION_ONECLICK_TYPE.ALCHEMY_REFINER:return 1;case l.VARIATION_ONECLICK_TYPE.ALTERNATE:return 5;case l.VARIATION_ONECLICK_TYPE.DEFAULT:return 4;case l.VARIATION_ONECLICK_TYPE.HD:return 6;case l.VARIATION_ONECLICK_TYPE.INSTANT_REFINE:return 3;case l.VARIATION_ONECLICK_TYPE.SMOOTH:return 7;case l.VARIATION_ONECLICK_TYPE.UNIVERSAL_UPSCALE:return 2}}return 4},e_=e=>{switch(e){case l.VARIATION_TYPE.OUTPAINT:return"Outpaint";case l.VARIATION_TYPE.INPAINT:return"Inpaint";case l.VARIATION_TYPE.UPSCALE:return"Upscale";case l.VARIATION_TYPE.UNZOOM:return"Unzoom";case l.VARIATION_TYPE.NOBG:case s.TH.NO_BG:return"No Background";case l.VARIATION_ONECLICK_TYPE.HD:case l.VARIATION_ONECLICK_TYPE.SMOOTH:case s.TH.UPSCALE_HD:case s.TH.UPSCALE_SMOOTH:return"Alchemy Upscaler";case l.VARIATION_ONECLICK_TYPE.ALCHEMY_REFINER:return"Alchemy Refiner";case l.VARIATION_ONECLICK_TYPE.UNIVERSAL_UPSCALE:return"Universal Upscaler";case l.VARIATION_ONECLICK_TYPE.INSTANT_REFINE:return"Instant Refine";default:return"Variation"}},ef=e=>{var t,n,r;if(!e)return{};let i=null===(t=e.generation)||void 0===t?void 0:t.imageWidth,o=null===(n=e.generation)||void 0===n?void 0:n.imageHeight;return null===(r=e.generated_image_variation_generics)||void 0===r?void 0:r.reduce((e,t)=>{var n,r;let a=null==t?void 0:null===(n=t.upscale_details)||void 0===n?void 0:n[0],u=(null==a?void 0:a.oneClicktype)||(null==t?void 0:t.transformType);if(!u)return e;let s=(null==a?void 0:a.alchemyRefinerCreative)||(null==a?void 0:a.oneClicktype)===l.VARIATION_ONECLICK_TYPE.SMOOTH?"Smooth":(null==a?void 0:a.oneClicktype)===l.VARIATION_ONECLICK_TYPE.HD?"Crisp":void 0,c={id:t.id,label:e_(u),name:"".concat((null===(r=e[u])||void 0===r?void 0:r.length)>0?"#".concat(e[u].length+1," "):"").concat(e_(u)),width:(null==a?void 0:a.width)||i,height:(null==a?void 0:a.height)||o,...s&&{alchemyRefinerMode:s},...(null==a?void 0:a.creativityStrength)&&{creativityStrength:null==a?void 0:a.creativityStrength},...(null==a?void 0:a.optional_metadata)&&{upscalerStyle:null==a?void 0:a.optional_metadata},...(null==a?void 0:a.upscaleMultiplier)&&{upscaleMultiplier:null==a?void 0:a.upscaleMultiplier},...(null==a?void 0:a.alchemyRefinerStrength)&&{alchemyRefinerStrength:N(null==a?void 0:a.alchemyRefinerStrength)}};return{...e,[u]:[...e[u]||[],c]}},{ORIGINAL:[{id:e.id,label:"Original",name:"Original",width:i,height:o}]})}},41291:function(e,t,n){var r,i;n.d(t,{N:function(){return r}}),(i=r||(r={})).ControlNet="CONTROLNET",i.ImagePrompt="IMAGE_PROMPT",i.Img2Img="IMG_2_IMG"}}]);